# Chapter 13 Design Pattern

## Definition

> **'Pattern'은 특정 컨텍스트 내에서 주어진 문제의 해결책**

- **컨텍스트**
    - 패턴이 적용되는 상황
    - 반복적으로 일어날 수 있는 상황이어야만 함

- **문제**
    - 컨텍스트 내에서 이뤄야 하는 목표
    - 컨텍스트 내의 제약조건도 포함

- **해결책**
    - 제약조건 속에서 누가 적용해도 목표를 이룰 수 있는 일반적인 디자인

> **"어떤 컨텍스트 내에서 일련의 제약조건에 의해 영향을 받는 문제가 발생했다면, 그 제약조건 내에서 목적 달성을 위한 해결책이 되는 디자인을 적용하면 된다"**

- 반복적으로 등장하는 문제에 적용할 수 있어야 한다.
- '해결책'을 다른 사람에게 알려 줘서 그 사람이 처한 문제의 해결책으로 적용하게 하기가 힘들다.
- 이름을 붙여야 한다.

---

## 디자인 패턴 분류하기

### Definition

- **데코레이터 패턴**: 객체를 감싸서 새로운 행동을 제공함
- **상태 패턴**: 상태를 기반으로 하는 행동을 캡슐화한 다음 위임으로 필요한 행동을 선택함
- **반복자 패턴**: 컬렉션이 어떤 식으로 구현되었는지 드러내지 않으면서도 컬렉션 내에 있는 모든 객체를 대상으로 반복 작업을 처리할 수 있게 해줌
- **퍼사드 패턴**: 일련의 클래스에 간단한 인터페이스를 제공함
- **전략 패턴**: 교환 가능한 행동을 캡슐화하고 위임으로 어떤 행동을 사용할지 결정함
- **프록시 패턴**: 객체를 감싸서 그 객체로의 접근을 제어함
- **팩토리 메소드 패턴**: 서브클래스에서 생성할 구상 클래스를 결정함
- **어댑터 패턴**: 객체를 감싸서 다른 인터페이스를 제공함
- **옵저버 패턴**: 상태가 변경되면 다른 객체들에게 연락을 돌릴 수 있게 해줌
- **템플릿 메소드 패턴**: 알고리즘의 개별 단계를 구현하는 방법을 서브클래스에서 결정함
- **컴포지트 패턴**: 클라이언트에서 객체 컬렉션과 개별 객체를 똑같이 다룰 수 있도록 해줌
- **싱글턴 패턴**: 딱 한 객체만 생성되도록 함
- **추상 팩토리 패턴**: 클라이언트에서 구상 클래스를 지정하지 않으면서도 객체군을 생성할 수 있도록 해줌
- **커맨드 패턴**: 요청을 객체로 감쌈

<br>

> **패턴 분류보다 더 중요한 일은 패턴을 제대로 이해하고, 여러 패턴 사이의 관계를 확실히 파악하는 일이다.**

---

### 용도

- **생성 패턴**
    - 객체 인스턴스를 생성하는 패턴
    - 클라이언트와 그 클라이언트가 생성해야 하는 객체 인스턴스 사이의 연결을 끊어주는 패턴
    - 싱글턴, 추상 팩토리, 팩토리 메소드, 프로토타입, 빌더

<br>

- **행동 패턴**
    - 클래스와 객체들이 상호작용하는 방법과 역할을 분담하는 방법을 다루는 패턴
    - 템플릿 메소드, 커맨드, 반복자, 옵저버, 상태, 전략, 중재자, 비지터, 메멘토, 인터프리터, 역할 변경

<br>

- **구조 패턴**
    - 클래스와 객체를 더 큰 구조로 만들 수 있게 구성을 사용하는 패턴
    - 프록시, 데코레이터, 컴포지트, 퍼사드, 어댑터, 플라이웨이트, 브리지

<br>

### 클래스 패턴 vs 객체 패턴

- **클래스 패턴**
    - 클래스 사이의 관계가 상속으로 어떻게 정의되는지를 다룸
    - 클래스 사이의 관계는 대부분 컴파일할 때 결정됨
    - 템플릿 메소드, 팩토리 메소드, 어댑터, 인터프리터

<br>

- **객체 패턴**
    - 객체 사이의 관계(보통 구성)를 다룸
    - 실행 중에 관계가 결정되므로 보다 동적이고 유연함

---

## 안티 패턴

> **안티 패턴**은 어떤 문제의 나쁜 해결책에 이르는 길을 알려준다.

- 어떤 이유로 나쁜 해결책에 유혹되는지를 알려 준다.
- 장기적인 관점에서 그 해결책이 나쁜 이유를 알려 준다.
- 좋은 해결책을 만들 때 적용할 수 있는 다른 패턴을 제안해 준다.

---

## 패턴으로 생각하기

- 디자인을 할 때 무엇보다도 중요한 원칙은 <u>**최대한 단순한 방법(KISS)으로 문제를 해결하기**</u>이다.
- 패턴을 사용할 때는 그 패턴이 **설계한 디자인에 미칠 영향과 결과**를 주의 깊게 생각해 봐야 한다.
- 디자인을 할 때, 지금 <u>**디자인상의 문제에 적합하다는 확신이 든다면 패턴을 도입**</u>해야 한다.
- **간단한 해결책으로 문제가 해결되는 데도 시스템의 어느 부분이 변경될 거라고 예측되는 상황에는 디자인 패턴을 적용해야 한다.**
- 리팩토링의 목적은 행동 변경이 아니라 **구조 개선**이다.
- 패턴보다 간단한 해결책이 더 나을 것 같다 싶을 때 패턴을 제거한다.

<br>

- 디자인 패턴의 과다한 사용으로 불필요하게 복잡한 코드가 만들어질 수 있다.
- 항상 가장 간단한 해결책(**디자인 원칙**)으로 목적을 달성할 수 있도록 하고, 반드시 필요할 때만 디자인 패턴을 적용한다.